
import VerificationToken from "@/util/models/auth/verificationtoken";
import { Knex } from "knex";
import { Model } from "objection";

/**
 * @param { import("knex").Knex } knex
 * @returns { Promise<void> }
 */
exports.seed = async function (knex : Knex ): Promise<void> {
  // Bind the model to the knex instance
  Model.knex(knex);

  // Clear existing verification tokens
  await VerificationToken.query().delete();

  // Insert sample verification token
  await VerificationToken.query().insert({
    identifier: "alice@example.com",
    token: "verify-123",
    expires: new Date(Date.now() + 60 * 60 * 1000), // 1 hour from now
  });
};
